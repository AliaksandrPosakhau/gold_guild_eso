pipeline{

    agent any
    
    options{
        disableConcurrentBuilds()
    }

    stages{
        stage("INSTALL NPM AND DEPLOY ENVIRONMENT"){
            steps{
                echo "========executing NPM INSTALL COMMAND========"
                sh "npm install"
                echo "========executing WEBDRIVER MANAGER UPDATE COMMAND========"
                sh "npx webdriver-manager update --versions.chrome 76.0.3809.68"
            }            
        }

        stage("EXECUTING APPLICATION"){
            steps{
                echo "======== LAUNCHING TEST ========"
                sh "KIM_KILO=${params.KIM_KILO} npx protractor config/conf.js"              
            }            
        }
    }    
}